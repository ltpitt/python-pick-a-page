/**
 * Mobile & Responsive Styles
 * 
 * Responsibility: Mobile-first responsive adjustments for all components.
 * Single Responsibility: Only handles responsive behavior and touch optimization.
 * 
 * Note: Desktop styles are default. These override for mobile devices.
 */

@media (max-width: 768px) {
    /* Global Layout */
    body {
        padding: var(--spacing-xs) 0;
    }
    
    /* Book Container */
    .book {
        padding: var(--book-padding-mobile);
        border-radius: 0;
        min-height: auto;
    }
    
    /* Hide decorative spine on mobile */
    .book::before {
        display: none;
    }
    
    /* Language Selector - Move above bookmarks */
    .language-selector {
        position: static;
        padding: 0 0 var(--spacing-lg) 0;
        text-align: center;
    }
    
    .language-selector select {
        padding: var(--spacing-sm) var(--spacing-3xl) var(--spacing-sm) var(--spacing-md);
        font-size: var(--font-size-base); /* Prevent iOS zoom on focus */
        width: 100%;
        max-width: 100%;
        border-radius: var(--radius-lg);
    }
    
    /* Bookmarks - Horizontal scroll */
    .bookmarks {
        position: static;
        left: auto;
        right: auto;
        gap: var(--spacing-xs);
        padding: 0 0 var(--spacing-xl) 0;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none; /* Firefox */
        display: flex;
        justify-content: flex-start;
    }
    
    /* Hide scrollbar (Chrome, Safari) */
    .bookmarks::-webkit-scrollbar {
        display: none;
    }
    
    .bookmark {
        padding: 14px var(--spacing-xl);
        font-size: var(--font-size-base); /* Prevent iOS zoom */
        white-space: nowrap;
        flex-shrink: 0;
        min-height: var(--touch-target-min); /* Better touch target */
        display: flex;
        align-items: center;
        border-radius: var(--radius-lg);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
    }
    
    .bookmark.active {
        border-bottom: 4px solid var(--color-primary-start);
        font-weight: var(--font-weight-bold);
    }
    
    /* Page Titles */
    .page-title {
        font-size: var(--font-size-2xl);
        margin-bottom: var(--spacing-xl);
        padding-bottom: var(--spacing-md);
    }
    
    /* Story Grid - Single column */
    .story-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
    }
    
    .story-card {
        padding: var(--spacing-lg);
        border-radius: var(--radius-lg);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
    
    .story-card-title {
        font-size: 1.4em;
        padding-right: var(--spacing-3xl); /* Space for delete button */
    }
    
    /* Larger touch target for delete button */
    .story-card-delete {
        top: var(--spacing-md);
        right: var(--spacing-md);
        padding: var(--spacing-xs);
        font-size: 1.4em;
        min-width: 36px;
        min-height: 36px;
        border-radius: var(--radius-md);
    }
    
    /* Action Buttons - Full width stack */
    .story-actions {
        flex-direction: column;
        gap: var(--spacing-sm);
        margin-top: var(--spacing-xl);
    }
    
    .story-actions .btn {
        width: 100%;
        padding: var(--spacing-md) var(--spacing-xl);
        font-size: var(--font-size-base); /* Prevent iOS zoom */
        min-height: var(--touch-target-comfortable); /* Generous touch target */
        border-radius: var(--radius-lg);
        justify-content: center;
    }
    
    /* Editor Optimizations */
    textarea {
        font-size: var(--font-size-base); /* Prevent iOS zoom */
        min-height: 300px;
        border-radius: var(--radius-lg);
        padding: var(--spacing-md);
    }
    
    /* Empty State */
    .empty-state {
        padding: var(--spacing-3xl) var(--spacing-lg);
    }
    
    .empty-state-icon {
        font-size: 3em;
    }
    
    /* Story Player */
    #storyPlayer {
        height: calc(100vh - 200px);
        min-height: 400px;
    }
}

/* Extra small devices (landscape phones) */
@media (max-width: 480px) {
    .page-title {
        font-size: var(--font-size-xl);
    }
    
    .story-card-title {
        font-size: 1.2em;
    }
    
    .btn {
        font-size: var(--font-size-sm);
    }
}

/* Tablet and larger */
@media (min-width: 769px) and (max-width: 1024px) {
    .container {
        max-width: 95%;
    }
    
    .story-grid {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    }
}

/* Print Styles */
@media print {
    body {
        background: white;
        padding: 0;
    }
    
    .book {
        box-shadow: none;
        padding: var(--spacing-lg);
    }
    
    .bookmarks,
    .language-selector,
    .story-actions,
    .message,
    .story-card-delete {
        display: none !important;
    }
    
    .page {
        display: block !important;
        page-break-after: always;
    }
}
